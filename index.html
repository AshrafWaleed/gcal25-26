<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Calendar App</title>
 	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
 	<style type="text/css">
 		.table {
 			width:  90%;
 			margin:  0 auto;
 			text-align:  center;
 		}
 		.row {
 			justify-content:  center;
 		}
 		.rowHead {
 			margin: 1em;
 		}
 		input {
 			width:  100%;
 		}
 		.col-1 {
 			min-width: 10%;
 			overflow: clip;
 		}
 		.col-2 {
 			min-width: 20%;
 		}
 		.block {
 			text-align:  left;
 		}
 		#submitContainer {
 			display: flex;
 			justify-content:  center;
 			align-items:  center;
 		}

		input:disabled {
			color: #000;	
		}
 	</style>

</head>
<body>
	<br>
	<h1 style="text-align: center">Hi, put your subjects here!</h1>
	<div style="text-align: center"><p>The placeholder subjects there are mine as an example :)</p></div>
	<div class="table" id="timetable">
		<div class="row rowHead">
			<div class="col-2"></div>
			<div class="col-1">Day 1</div>
			<div class="col-1">Day 2</div>
			<div class="col-1">Day 3</div>
			<div class="col-1">Day 4</div>
			<div class="col-1">Day 5</div>
			<div class="col-1">Day 6</div>
			<div class="col-1">Day 7</div>
			<div class="col-1">Day 8</div>
		</div>
		<div class="row row1">
			<div class="col-2 block"><p>Block 1 (8:00-8:55)</p></div>
			<div class="col-1 day1"><input placeholder="English"></div>
			<div class="col-1 day2"><input placeholder=""></div>
			<div class="col-1 day3"><input placeholder="Math"></div>
			<div class="col-1 day4"><input placeholder="Biology"></div>
			<div class="col-1 day5"><input placeholder="Italian"></div>
			<div class="col-1 day6"><input placeholder="Physics"></div>
			<div class="col-1 day7"><input placeholder=""></div>
			<div class="col-1 day8"><input placeholder="WAC"></div>
		</div>
		<div class="row row2">
			<div class="col-2 block"><p>Block 2 (9:00-9:55)</p></div>
			<div class="col-1 day1"><input placeholder="Italian"></div>
			<div class="col-1 day2"><input placeholder="Physics"></div>
			<div class="col-1 day3"><input placeholder=""></div>
			<div class="col-1 day4"><input placeholder="WAC"></div>
			<div class="col-1 day5"><input placeholder="English"></div>
			<div class="col-1 day6"><input placeholder="TOK"></div>
			<div class="col-1 day7"><input placeholder="Math"></div>
			<div class="col-1 day8"><input placeholder="Biology"></div>
		</div>
		<div class="row row3">
			<div class="col-2 block"><p>Block 3 (10:00-10:55)</p></div>
			<div class="col-1 day1"><input placeholder="Math"></div>
			<div class="col-1 day2"><input placeholder="Biology"></div>
			<div class="col-1 day3"><input placeholder="Italian"></div>
			<div class="col-1 day4"><input placeholder="Physics"></div>
			<div class="col-1 day5"><input placeholder=""></div>
			<div class="col-1 day6"><input placeholder="WAC"></div>
			<div class="col-1 day7"><input placeholder="English"></div>
			<div class="col-1 day8"><input placeholder="TOK"></div>
		</div>
		<div class="row row4">
			<div class="col-2 block"><p>Block 4 (11:20-12:15)</p></div>
			<div class="col-1 day1"><input placeholder="Physics"></div>
			<div class="col-1 day2"><input placeholder="Math"></div>
			<div class="col-1 day3"><input placeholder="Biology"></div>
			<div class="col-1 day4"><input placeholder="Italian"></div>
			<div class="col-1 day5"><input placeholder="Physics"></div>
			<div class="col-1 day6"><input placeholder="Math"></div>
			<div class="col-1 day7"><input placeholder="Biology"></div>
			<div class="col-1 day8"><input placeholder="Italian"></div>
		</div>
		<div class="row row5">
			<div class="col-2 block"><p>Block 5 (12:20-13:45)</p></div>
			<div class="col-1 day1"><input placeholder=""></div>
			<div class="col-1 day2"><input placeholder="WAC"></div>
			<div class="col-1 day3"><input placeholder="English"></div>
			<div class="col-1 day4"><input placeholder="TOK"></div>
			<div class="col-1 day5"><input placeholder="Math"></div>
			<div class="col-1 day6"><input placeholder="Biology"></div>
			<div class="col-1 day7"><input placeholder="Italian"></div>
			<div class="col-1 day8"><input placeholder="Physics"></div>
		</div>
	</div>
	<br>
	<br>
	<div id="submitContainer"><button id="submit">Download your CSV File</button></div>
	<br>
	<div style="margin-left: 2em">
		<h3>How do I use this?</h3>
		<ol>
			<li>Fill in your subjects</li>
			<li>Download the CSV File</li>
			<li>Create a new Calendar in Google Calendar</li>
			<li>In Google Calendar, go to Settings > Import & export</li>
			<li>Upload your file, choose your new Calendar, and import it!</li>
		</ol>
	</div>
		<br>
		<!-- <div style="text-align: center"><p><b>For secondi: Don't forget to remove classes during trials!</b></p></div> -->
		<div style="text-align: center"><p>The app is now updated till the end of term!</p></div>
	<div style="text-align: center"><p>Let Tin (+39 351 9129282) know if there are any problems :)</p></div>
	<div style="text-align: center"><p>Continuing the work of Red, we will miss you!</p></div>
</body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

	<script type="text/javascript">
		// for future maintenance, change daycyc-ledayss
		const daycycledays = ["8/29/2023","8/30/2023","8/31/2023","9/1/2023","9/4/2023","9/5/2023","9/6/2023","9/7/2023","9/8/2023","9/11/2023","9/12/2023","9/13/2023","9/14/2023","9/15/2023","9/18/2023","9/19/2023","9/20/2023","9/22/2023","9/25/2023","9/26/2023","9/27/2023","9/28/2023","9/29/2023","10/2/2023","10/3/2023","10/4/2023","10/5/2023","10/6/2023","10/9/2023","10/10/2023","10/11/2023","10/12/2023","10/13/2023","10/16/2023","10/18/2023","10/19/2023","10/20/2023","10/23/2023","10/24/2023","10/25/2023","10/26/2023","10/27/2023","11/6/2023","11/7/2023","11/8/2023","11/9/2023","11/10/2023","11/13/2023","11/14/2023","11/15/2023","11/16/2023","11/17/2023","11/21/2023","11/22/2023","11/23/2023","11/24/2023","11/27/2023","11/28/2023","11/29/2023","11/30/2023","12/1/2023","12/4/2023","12/5/2023","12/6/2023","12/7/2023","12/8/2023","12/11/2023","12/12/2023","12/13/2023","12/14/2023",];
		const starts = ['8:00','9:00','10:00','11:20','12:20'];
		const ends = ['8:55','9:55','10:55','12:15','13:45'];
		const header = ['Subject', 'Start Date', 'Start Time', 'End Date', 'End Time', 'All Day Event', 'Location'];
		let csv = header.join(',') + '\n';
		let blockList = ['G', 'C', 'A', 'D', 'E', 'H', 'D', 'B', 'A', 'F'];
		let block = {}

		document.querySelector('#submit').addEventListener('click', function(){
			let subjs = [];

			for(let i = 1; i <= 8; i++){
				for(let j = 1; j <= 5; j++){
					let query = '.row' + j + ' .day' + i + ' input'
					subjs.push(document.querySelector(query).value)
				}
			}

			for(let i = 0; i < 10; i++){
				block[subjs[i]] = blockList[i];
			}


			for(let i = 0; i < daycycledays.length; i++){
				// for future maintenace, change (i+x) (x is number fitted to calendar)
				let count = (i + 0) % 8 + 1;

				// 5 is the number of blocks in a day
				for(let subjcount = 0; subjcount < 5; subjcount++){
					if(!subjs[(count - 1) * 5 + subjcount] == ""){
						subjs_ind = (count - 1)*5 + subjcount;
						subj = subjs[subjs_ind];
						csv += [subj, daycycledays[i], starts[subjcount], daycycledays[i], ends[subjcount], false, ''].join(',');
						csv += '\n';
					}
				}
			}

			var hiddenElement = document.createElement('a');
		    hiddenElement.href = 'data:text/csv;charset=utf-8,' + encodeURI(csv);
		    hiddenElement.target = '_blank';
		    
		    hiddenElement.download = 'calendarTest.csv';
		    hiddenElement.click();
		})
	</script>

</html>
